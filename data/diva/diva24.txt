A Computer Laboratory on
Active Sound Control
SAMIR MOUBADDER
Masters‚Äô Degree Project
Stockholm, Sweden 2006
XR-EE-RT 2006:006
2
3
Sammanfattning
 
Syftet med detta examensarbete √§r att utveckla en datorlaboration baserat p√• aktiv 
ljudreglering f√∂r kursen reglerteknik allm√§n kurs f√∂r maskin och farkostteknik vid Kungliga 
Tekniska H√∂gskolan KTH. Arbetet ska innefatta en utveckling av en matematisk modell av 
r√∂rsystemet som ska regleras med en lead-lag regulator. R√∂rsystemet vid Marcus Wallenberg 
Laboratoriet ska anv√§ndas som modellsystem, och den matematiska modellen ska baseras p√• 
m√§tningar insamlade p√• detta system.   
 
Den matematiska modellen skapades med hj√§lp av ett s.k. identifieringsexperiment 
och identifieringen baserades p√• en viktad minsta kvadratanpassning av insamlade 
frekvensdata. Modellen anpassades till en √∂verf√∂ringsfunktion som visade sig ha ett nollst√§lle 
i komplexa h√∂gra halvplanet, vilket motsvarar en sv√•r bandbreddsbegr√§nsning f√∂r den aktiva 
ljudd√§mpningen. Orsaken till nollst√§llet i h√∂gra halvplanet orsakas sannolikt av 
ljudreflektioner i r√∂rsystemet. 
 
Begr√§nsningen i bandbredden inneb√§r att st√∂rningsundertryckning endast kan sker upp 
till en specifik frekvens. F√∂r r√∂rsystemet vid MWL innebar en s√•dan begr√§nsning att effekten 
av undertryckningen inte kommer att vara h√∂rbar. Till denna anledning gjordes en modifiering 
i modellen i syfte att g√∂ra systemet anv√§ndbart f√∂r en laborationsuppgift f√∂r reglering med en 
lead-lag regulator. Regleringen av den modifierade modellen gav ett h√∂rbart resultat. 
F√∂rord
 
Jag vill h√§rmed tacka Hans Bod√©n vid Marcus Wallenberg Laboratoriet f√∂r sin stora 
hj√§lp med data insamlingen. Ytterligare en person som m√•ste tackas f√∂r hans st√§ndiga hj√§lp 
och handledning under examensarbetet √§r min handledare och examinator Elling W Jacobsen.  
 
Jag vill √§ven tacka mina f√∂r√§ldrar och min f√§stm√∂ vilka motiverat och st√∂tt mig genom 
detta examensarbete. Ett stort tack till er allihopa. 
4
5
 Inneh√•llsf√∂rteckning 
F√∂rkortningar och begrepp ...................................................................7 
1 Inledning‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. 9
 
1.1 Aktiv ljudreglering ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ 9  
 
1.2 Framkopplad reglering .‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶... 10 
 
1.3 √Öterkopplad reglering ..‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶10 
 
1.4 Syftet med examensarbetet‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶...11 
2 Problemdefinition...............................................................................13 
 
2.1 Problemformulering ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.13 
 
2.2 Uppst√§llningen vid MWL‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.13 
3 Modellering‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶15
 
3.1 Skapa en matematisk modell √∂ver systemet vid MWL ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..‚Ä¶15 
 
3.2 Data insamling ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶...‚Ä¶.17 
 
3.3 Identifikation i frekvensplanet ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..‚Ä¶..18 
 
3.4 Analys av √∂verf√∂ringsfunktion ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.‚Ä¶..‚Ä¶‚Ä¶21 
 
3.5 Fysikaliska √§ndringar i systemet  ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..‚Ä¶‚Ä¶‚Ä¶.23 
4 Modellbaserad regulator................................................. 27 
 
4.1 Analys ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.‚Ä¶.27 
 
4.2 Loop shaping design ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶28 
 
4.3 Modifiering av reglerbarhet  ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶30 
6
5 F√∂rslag till laborations uppgift..............................................................35 
6 Slutsatser...........................................................................................39 
7 Referenser.........................................................................................41 
7
F√∂rkortningar och begrepp
ASC  
 
Engelska √∂vers√§ttningen av aktiv ljudreglering (active  
 
sound control) 
MWL  
Marcus Wallenberg laboratoriet  
Frekvensfunktion 
en representation av ett system i frekvensplanet 
√ñverf√∂ringsfunktion  
en representation av ett system i Laplaceplanet 
Invfreqs   
en Matlab funktion som finner de reella t√§ljar- och 
n√§mnarkoefficienterna till en tidskontinuerlig √∂verf√∂ringsfunktion 
givet en komplex frekvensfunktion   
HHP 
h√∂gra halv planet. 
VHP 
v√§nstra halv planet.  
Nollst√§lle  
r√∂tter till den karakteristiska ekvationen B(s) = 0, d√§r B(s) f√•s
 
ur √∂verf√∂ringsfunktionen
)
(
)
(
)
(
s
A
s
B
s
G
 
.
Pol 
 
 
 
r√∂tter till den karakteristiska ekvationen A(s) = 0, d√§r A(s) f√•s
 
 
 
 
ur √∂verf√∂ringsfunktionen
)
(
)
(
)
(
s
A
s
B
s
G
 
.
hM
frekvensfunktionen av systemet vid MWL 
hMf 
frekvensfunktionen av systemet vid MWL d√• tidsf√∂rdr√∂jningen ej 
√§r modellerad   
hM2
frekvensfunktionen av systemet vid MWL med mikrofonen i 
samma tv√§rsnitt som h√∂gtalare 2   
hMabs
frekvensfunktionen av systemet vid MWL med mikrofonen i 
samma tv√§rsnitt som h√∂gtalare 2 och med absorberingsmaterial 
n 
ordningen p√• t√§ljarpolynomet till en √∂verf√∂ringsfunktion 
m 
ordningen p√• n√§mnarpolynomet till en √∂verf√∂ringsfunktion = 
ordningen p√• ett system 
G(s) 
irrationella √∂verf√∂ringsfunktionen mellan h√∂gtalare 2 och 
mikrofonen.  
G1(s) 
rationella √∂verf√∂ringsfunktionen mellan h√∂gtalare 2 och mikrofonen.  
G2(s) 
√∂verf√∂ringsfunktionen mellan h√∂gtalare 2 och mikrofonen d√• den 
senare finns bel√§gen i samma tv√§rsnitt som h√∂gtalare 2. 
8
G2mod(s) 
modifierat G2(s). Nollst√§llerna till G2(s) har speglats in i VHP och 
ett nollst√§lle i 8500 rad/s har lagts med bibeh√•llen absolutv√§rde.  
G2modf(s) 
√∂verf√∂ringsfunktionen d√§r vissa resonanser i G2mod(s) har tagits bort
wB 
 
 
 
bandbredden i rad/s, det v√§rde f√∂r vilket f√∂rst√§rkningen sjunker  
under
2
1
 (= -3 dB)  
Zc 
 
 
 
sk√§rfrekvensen, frekvensen f√∂r vilket f√∂rst√§rkningen av en 
√∂verf√∂ringsfunktion antar v√§rdet 1. 
Im 
 
 
 
fasmarginal, avst√•ndet (i grader) till vinkeln 180 grader vid 
sk√§rfrekvensen Zc
S(s) 
 
 
 
 K√§nslighetsfunktion 
9
Kapitel 1 
Inledning
1.1 Aktiv ljudreglering  
Ov√§sen har blivit ett stort problem i v√•rt samh√§lle. M√•nga maskiner och elektroniska 
apparater avger i de flesta fall n√•gon form av st√∂rande ljud. Med ljud avses tryckf√∂r√§ndringar 
i luft med frekvenser som ligger inom h√∂rbarhetens gr√§ns, vilken f√∂r m√§nniskans del omfattar 
omr√•det 20-20 kHz. 
Att undertrycka st√∂rande ljud med hj√§lp av absorberingsmaterial har l√§nge varit det 
traditionella s√§ttet. Nackdelen med detta s√§tt √§r bl.a. att endast h√∂gfrekventa st√∂rningar 
d√§mpas (st√∂rningar med frekvenser √∂ver 1 kHz). F√∂r att f√• en d√§mpning vid l√•ga frekvenser 
har det forskats, sedan 60 √•r tillbaka, p√• att anv√§nda aktiv ljudreglering (eng. active sound 
control, ASC). F√∂rsta patentet inom omr√•det skrevs av Tysken Paul Leug, se [1]. D√§r 
anv√§nder han faktumet att ljudv√•gor har en linj√§r egenskap. Denna egenskap g√∂r att 
√∂verlagring, √§ven kallad superposition sker d√• tv√• separata ljudv√•gor m√∂ts. D√• tv√• ljudv√•gor 
med samma amplitud men med motsatt fas m√∂ts superponeras de och ett konstant tryck, eller 
med andra ord tystnad, f√•s. I Leugs patent anv√§nds denna princip f√∂r att kancellera ljudv√•gor 
som propagerar genom ett r√∂r.  
Figur 1: En skiss ur Paul Leugs patent. H√§r framg√•r det hur det med hj√§lp av en regulator 
skapas ett ljudf√§lt, identiskt men 180 grader fasvriden med ljudf√§ltet alstrad av den prim√§ra 
ljudk√§llan. Den prim√§ra ljudk√§llan alstrar det st√∂rande ljudet i systemet.
Vid aktiv ljudreglering (ASC) anv√§nds en regulator f√∂r att skapa ett konstgjort ljudf√§lt 
som ska sl√§cka ut det st√∂rande ljudet. Det skapade ljudf√§ltet, som ska vara en exakt kopia av 
det st√∂rande ljudet men med en 180 grader fasvridning, skickas ut i systemet med hj√§lp av en 
sekund√§r ljudk√§lla, se figur 1. Tv√• olika typer av reglering kan anv√§ndas i detta syfte, 
framkopplad (eng. feedforward) eller √•terkopplad reglering (eng. feedback control). 
10
1.2 Framkopplad reglering  
Den framkopplade regleringen av ljud bygger p√• att k√§nnedom om bruset man vill 
undertrycka finns tillg√§nglig. Kunskap om bruset (√§ven kallad f√∂r den prim√§ra ljudk√§llan, eng. 
primary source) f√•s genom en referensmikrofon [2]. Vidare anv√§nds signalen fr√•n 
referensmikrofonen som insignal till en regulator, se figur 2. Regulatorn, som driver den 
sekund√§ra h√∂gtalaren, skapar en 180 grader fasvriden kopia av referenssignalen f√∂r att 
kancellera bort bruset. 
      Figur 2: En schematisk bild √∂ver en framkopplad aktiv ljudreglering   
F√∂r att den framkopplade regleringen ska vara anv√§ndbar m√•ste referensmikrofonen 
med en stor noggrannhet ge en bra uppskattning av den prim√§ra ljudk√§llan. Exempel p√• 
applikationer d√§r den framkopplade regleringen √§r anv√§ndbar √§r milj√∂er med en periodisk 
st√∂rning. I dessa milj√∂er kan referensmikrofonen ge en bra uppskattning av st√∂rningen och 
d√§rmed kommer regleringen att bidra med en bra st√∂rningsundertryckning.   
I de fall d√• en referensmikrofon inte kan bidra med en bra uppskattning av bruset √§r 
den framkopplade regleringen inte till n√•gon st√∂rre nytta, utan √•terkoppling √§r att 
rekommendera. En situation d√§r framkoppling inte √§r att f√∂redra √§r exempelvis milj√∂er d√§r 
positionen p√• den prim√§ra ljudk√§llan √§r ok√§nd [2]. I s√•dana milj√∂er √§r det inte uppenbart vart 
man ska placera referensmikrofonen f√∂r att f√• en bra uppskattning av bruset. 
1.3 √Öterkopplad reglering 
 
F√∂r milj√∂er med flera osammanh√§ngande prim√§ra ljudk√§llor kan man inte f√• en bra 
referenssignal med hj√§lp av en referensmikrofon. I dessa milj√∂er kan framkoppling inte 
utnyttjas f√∂r att aktivt reglera bort det o√∂nskade ljudet, utan man f√•r ist√§llet anv√§nda sig av 
√•terkoppling. Vid den √•terkopplade regleringen beh√∂vs ingen exakt kunskap om ljudformen 
alstrad av den prim√§ra ljudk√§llan.  
Aktiv ljudreglering med hj√§lp av √•terkoppling blev f√∂rst anv√§nt av Olson och May 
1953, se [1]. H√§r anv√§nder man sig av en mikrofon och en h√∂gtalare enligt figur 3. Signalen 
fr√•n mikrofonen √§r kopplad med en regulator. Utsignalen fr√•n denna regulator driver som 
innan den sekund√§ra h√∂gtalaren, vilket ska kancellera ljudet orsakad av den prim√§ra 
ljudk√§llan. Omr√•det kring mikrofonen ska idealiskt vara ett omr√•de med total tystnad. 
11
      Figur 3: En schematisk bild √∂ver en √•terkopplad aktiv ljudreglering   
 
Skillnaden mellan fram- och √•terkopplad reglering ligger i hanteringen av utsignalen 
fr√•n regulatorn. Vid den framkopplade regleringen anv√§nds inte mikrofonsignalen f√∂r att 
detektera effekten av regleringen utan bara f√∂r att bilda en uppfattning av det st√∂rande ljudet. 
Med andra ord √§r utsignalen fr√•n regulatorn inte tillg√§nglig f√∂r den som ska best√§mma 
insignalen. Detta g√∂r att en helt exakt kunskap om insignalens p√•verkan p√• utsignalen m√•ste 
finnas och en exakt uppfattning av det st√∂rande ljudet man vill kancellera. Vid den 
√•terkopplade regleringen d√§remot anv√§nds utsignalen fr√•n regulatorn till att best√§mma 
insignalen. Detta medf√∂r att endast en ungef√§rlig uppfattning av ljudet  som ska kancelleras √§r 
n√∂dv√§ndig.
 
 
 
1.4 Syftet med examensarbetet 
 
Hittills har arbeten inom aktiv ljudreglering anv√§nt avancerade regulatorer f√∂r att 
aktivt reglera bort ljud. B√•de i framkopplad och √•terkopplad reglering har det anv√§nts 
avancerade regulatorer som Internal Model Control IMC och Linear Quadratic Gaussian LQG 
f√∂r att undertrycka st√∂rande ljud, se [3] och [4].  Syftet med detta examensarbete √§r att f√∂rs√∂ka 
anv√§nda en enklare typ av regulator, en s√• kallad Lead-lag regulator, f√∂r att undertrycka ljudet 
alstrad av en prim√§r ljudk√§lla i ett r√∂rsystem vid Marcus Wallenberg laboratoriet, MWL. Den 
√•terkopplade varianten av aktiv ljudreglering ska till√§mpas p√• detta system.  
12
13
Kapitel 2
Problemdefinition
2.1 Problemformuleringen  
Syftet med detta examensarbete √§r att utveckla en datorlaboration baserat p√• aktiv  
ljudreglering. Laborationen ska vara en del av kursen reglerteknik allm√§n kurs f√∂r maskin och 
farkostteknik programmet vid Kungliga tekniska h√∂gskolan, KTH. M√•let √§r att demonstrera 
en reglerdesign baserat p√• √•terkoppling av ett enkelt analogt ljudsystem. Arbetet ska innefatta 
en utveckling av en matematisk modell av ljudsystemet som ska regleras, implementering i ett 
program vilket k√∂rs under Matlab samt utveckling av en l√§mplig uppgift som ska l√∂sas av 
studenter som en del av en datorlaboration i kursen. Ljudlaboratoriet vid Marcus Wallenberg 
laboratoriet, MWL ska anv√§ndas som modellsystem, och den matematiska modellen ska 
baseras p√• m√§tningar insamlade p√• detta system. Implementeringen i Matlab ska helst 
involvera ett grafiskt anv√§ndargr√§nssnitt (GUI) och dator h√∂gtalarna ska anv√§ndas f√∂r att
alstra modellens utsignal.  
 
Examensarbetet ska genomf√∂ras i samarbete med Marcus Wallenberg laboratoriet, 
MWL. 
2.2 Uppst√§llningen vid MWL 
 
Figur 4 visar en skiss √∂ver systemet vid MWL. Detta system best√•r av ett r√∂r med tv√• 
h√∂gtalare och en mikrofon. H√∂gtalare 1, som √§r placerad i ena √§nden av r√∂ret √§r en h√∂gtalare 
som alstrar bruset i systemet. Med hj√§lp av h√∂gtalare 2 och mikrofonen ska detta brus 
regleras. Vid denna uppst√§llning har mikrofonen placerats med 0.225 meters avst√•nd fr√•n 
h√∂gtalare 2. 
             Figur 4: En skiss √∂ver uppst√§llningen vid MWL.  
14
15
Kapitel 3
Modellering
 
En viktig del av examensarbetet g√•r ut p√• att bilda en matematisk modell av systemet 
vid Marcus Wallenberg laboratoriet, MWL. En matematisk modell av ett system anv√§nds f√∂r 
att analysera och simulera systemet. En s√•dan modell anv√§nds ocks√• i arbetet med att 
konstruera en regulator. Med matematiska modeller menas att samband mellan storheter som 
kan observeras i ett system anges som matematiska relationer i en modell.  
 
I detta avsnitt kommer det att beskrivas hur man g√•tt tillv√§ga f√∂r att bilda en 
matematisk modell √∂ver r√∂rsystemet vid MWL. Modellen kommer att unders√∂kas och 
verifieras. Det kommer √§ven att diskuteras m√∂jligheten med att fysikaliskt √§ndra i r√∂rsystemet 
f√∂r att f√• ett system med en mindre bandbreddsbegr√§nsning.   
3.1 Skapa en matematisk modell √∂ver systemet vid MWL 
 
 
En matematisk modell kan skapas med hj√§lp av tv√• grundprinciper,  fysikalisk modell
konstruktion och/eller identifieringsexperiment [5]. Vid den fysikaliska modell konstruktionen 
skapas en modell √∂ver ett system utifr√•n de fysikaliska lagarna som g√§ller f√∂r systemet. Den 
andra modelleringsprincipen bygger p√• observationer fr√•n systemet. Genom att utg√• ifr√•n 
sambandet mellan insignalen och utsignalen till ett system kan det oftast bildas en ganska bra 
modell.  
 
 
Eftersom ljudet i r√∂rsystemet vid MWL ska regleras med hj√§lp av √•terkoppling och d√• 
denna typ av reglering inte beh√∂ver en exakt modell √∂ver systemet v√§ljs 
identifieringsexperiment som metod f√∂r modellering.  En annan orsak bakom valet av denna 
metod √§r att modellen √∂ver r√∂rsystemet enklast skapas med ett identifieringsexperiment.  
Vid ett identifieringsexperiment betraktas systemet som ska modelleras som en svart 
l√•da (eng. black box), h√§nsyn tas bara till sambandet mellan insignalen och utsignalen. Vid 
denna typ av modellering √§r det viktigt att best√§mma en l√§mplig insignal. En slumpm√§ssig 
vald insignal ger inte alltid en fullst√§ndig information om systemet. Det g√§ller att v√§lja en 
insignal som leder till att en stor del av dynamiken i systemet observeras i utsignalen. Vidare i 
avsnitt 3.2  kommer valet av insignal till r√∂rsystemet vid MWL att introduceras.   
Sambanden mellan insignaler och utsignaler kan representeras p√• olika s√§tt, men den 
mest illustrativa och anv√§ndbara representationen f√•s med en √∂verf√∂ringsfunktion. F√∂r ett 
linj√§rt system med en insignal u(t) och en utsignal y(t) g√§ller f√∂ljande samband 
)
(
)
(
)
(
s
U
s
G
s
Y
 
 
 
 
(1) 
 
d√§r G(s) kallas f√∂r √∂verf√∂ringsfunktion. Om det linj√§ra systemet drivs av en insignal  
 
       
)
cos(
)
(
t
t
u
Z
 
 
  
(2) 
16
blir den station√§ra utsignalen fr√•n det linj√§ra systemet 
 
       
)
cos(
)
(
U
Z 
 
t
A
t
y
 
  
(3) 
d√§r
 
       
,)
( Z
i
G
A  
     
)
(
arg
Z
U
i
G
 
 
  
(4) 
Ekvationerna 2-4 ovan visar att 
)
( Z
i
G
ger information om hur ett linj√§rt system svarar 
d√• det skickas in frekvenser som insignal. Av denna anledning kallas
)
( Z
i
G
f√∂r
frekvensfunktion eller frekvenssvar [6]. D√• det ibland kan vara sv√•rt att identifiera argumentet 
och amplituden till utsignalen, utnyttjas ist√§llet signalernas spektrum f√∂r att bilda 
frekvensfunktionen
)
( Z
i
G
enligt:
)
(
)
(
)
(
Z
Z
Z
u
uy
R
i
G
R
 
√Ü  
 
 
)
(
)
(
)
(
Z
Z
Z
u
uy
R
R
i
G
 
 
 
 
(5) 
   d√§r
)
(
)
(
)
(
* Z
Z
Z
i
U
i
Y
Ruy
 
  
 
 
(6) 
√§r korsspektrumet mellan ut- och insignalen och 
 
)
(
)
(
)
(
* Z
Z
Z
i
U
i
U
Ru
 
  
 
 
(7) 
√§r effektt√§thetsspektrumet av insignalen.
)
( Z
i
Y
och
)
( Z
i
U
√§r ut- respektive insignalens diskreta 
fouriertransformer och U* √§r det komplexa konjugatet av U.   
Ett anv√§ndbart s√§tt att illustrera och tolka frekvensfunktionen
)
( Z
i
G
√§r att plotta
dess f√∂rst√§rkning log
)
( Z
i
G
och dess fasf√∂rskjutning
^
`
)
(
arg
Z
i
G
som funktion av frekvens i  
logaritmisk skala, 
Z
log
. Detta s√§tt att illustrera
)
( Z
i
G
p√• kallas f√∂r Bode diagram eller
Bodeplott.
Ett identifieringsexperiment som leder till en frekvensfunktion har f√∂rdelen att man 
med dess hj√§lp l√§tt kan unders√∂ka olika frekvensomr√•den extra noga. Olika resonanser och 
sv√§ngningar i ett system kan enkelt observeras. Bland de nackdelar denna metod av 
identifiering har, √§r att frekvensfunktionen som bildas √§r representerad i form av en tabell 
eller graf [5]. Detta leder till att resultatet av identifieringen m√•ste behandlas p√• ett l√§mpligt 
s√§tt f√∂r att sedan kunna anv√§ndas i vidare arbeten. 
17
3.2 Data insamling  
Att konstruera en matematisk modell baserat p√• identifieringsexperiment kr√§ver att det 
f√∂rst best√§ms vilka matematiska samband i systemet som √§r av intresse. D√§refter m√•ste en 
l√§mplig insignal v√§ljas s√• att dessa samband framg√•r i utsignalen d√• exciteringen av systemet 
sker.
D√• regleringen av ljudniv√•n i r√∂rsystemet sker med hj√§lp av h√∂gtalare 2 och 
detekteringen av resultatet sker med hj√§lp av mikrofonen m√•ste de matematiska sambanden 
som r√•der d√§r emellan best√§mmas. Med andra ord m√•ste det bildas en √∂verf√∂ringsfunktion 
som representerar √∂verg√•ngen av ljudet mellan h√∂gtalare 2 och mikrofonen, se figur 4. 
Insignalen till denna √∂verf√∂ringsfunktion √§r ljudet som kommer ut fr√•n h√∂gtalaren och 
utsignalen √§r den signal som mikrofonen detekterar.    
Som n√§mnt i det inledande kapitlet till denna rapport anv√§nds ACS f√∂r att d√§mpa ljud 
med frekvenser under 1 kHz. √ñverf√∂ringsfunktionen som ska bildas m√•ste av denna anledning 
representera √∂verg√•ngen av ljud mellan h√∂gtalare 2 och mikrofonen med en frekvens upp till 
1 kHz.  F√∂r att bilda denna √∂verf√∂ringsfunktion med hj√§lp av ett identifieringsexperiment 
m√•ste en l√§mplig insignal v√§ljas. Denna insignal ska bidra med att en stor del av systemets 
dynamik ska observeras i utsignalen. Den insignal som b√§st bidrar med detta √§r vitt brus. Vitt 
brus √§r en signal som har sin energi lika f√∂rdelad √∂ver alla frekvenser och kan inte predikteras, 
gamla f√∂rlopp ger inte n√•gra kunskaper om de framtida.  
Figur 5: Bodeplotten av frekvensfunktionen mellan h√∂gtalare 2 och mikrofonen f√∂r systemet vid 
MWL
Vid MWL anv√§ndes vitt brus med frekvenser upp till 1 kHz och en samplingsfrekvens 
p√• 2560 Hz som insignal. Enligt Nyquist teoremet i [9] kr√§vs det en samplingsfrekvens p√• 
dubbla frekvensen f√∂r att information inte ska g√• f√∂rlorad vid sampling. Det hade med andra 
ord varit tillr√§ckligt med en samplingsfrekvens p√• 2 kHz. Genom att utnyttja ekvationerna (5)-
(7) f√•s den komplexa frekvensfunktionen hM av systemet. Frekvensfunktionen, vilket finns 
representerat i vektorform med komplexa frekvenspunkter, kan illustreras med hj√§lp av ett 
Bodeplott enligt figur 5.
18
 
Som tidigare n√§mnt kan det med hj√§lp av en frekvensfunktion observeras olika 
fenomen i ett system genom att plotta dess Bodeplott.  Betraktas exempelvis Bodeplotten i 
figur 5 kan m√•nga resonanstoppar och en kraftig fasvriden frekvensfunktion sk√•das. 
Resonanstopparna indikerar att vissa ljud toner f√∂rst√§rks kraftigt av r√∂ret mellan h√∂gtalare 2 
och mikrofonen. De kraftiga resonanstopparna och den stora fasvridningen g√∂r att det redan 
h√§r kan dras slutsatsen att en d√§mpning av ljudniv√•n i r√∂rsystemet inte kan uppn√•s med n√•gon 
enkel reglering, utan det beh√∂vs mer avancerade regulatorer f√∂r att f√• en optimal l√∂sning p√• 
problemet.  
 
Frekvensfunktionen hM kan endast anv√§ndas f√∂r att grafiskt illustrera systemets 
frekvenssvar mellan h√∂gtalare 2 och mikrofonen. Men f√∂r att f√•, ut√∂ver den grafiska 
representationen, en matematisk representation av de samband som r√•der i systemet m√•ste det 
bildas en √∂verf√∂ringsfunktion.
3.3 Identifikation i frekvensplanet 
Fr√•n MWL skapades en frekvensfunktion genom ett identifieringsexperiment. Vidare 
ska en √∂verf√∂ringsfunktion anpassas med hj√§lp av frekvensfunktionen hM.
Ett anv√§ndbart hj√§lpmedel f√∂r att omvandla magnitud och fasdata till en 
√∂verf√∂ringsfunktion √§r Matlabfunktionen invfreqs [12]. Med hj√§lp av denna funktion anpassas 
en tidskontinuerlig rationell √∂verf√∂ringsfunktion baserat p√• en given komplex 
frekvensfunktion.  Funktionen ger de reella t√§ljar- och n√§mnarkoefficienterna till polynomen 
B(s) och A(s) i den rationella √∂verf√∂ringsfunktionen 
)1
(
...
)
2
(
)1(
)1
(
...
)
2
(
)1(
)
(
)
(
)
(
1
1








 
 


m
a
s
a
s
a
n
b
s
b
s
b
s
A
s
B
s
G
m
m
n
n
       (8)
Konstanterna n och m representerar ordningen p√• t√§ljar- respektive n√§mnarpolynomet. 
Dessa konstanter √§r bland de inmatningsdata som ska anges till invfreqs f√∂r att g√∂ra det 
m√∂jligt f√∂r funktionen att finna koefficienterna till B(s) och A(s). Ut√∂ver dessa konstanter 
m√•ste √§ven den komplexa frekvensfunktionen vara given. 
Matlabfunktionen invfreqs anv√§nder en felber√§kningsmetod (eng. equation error 
method) f√∂r identifiering. Vid denna metod best√§ms t√§ljar- och n√§mnarkoefficienterna B(s)
och A(s) genom en minimering av den viktade funktionen  
  
  
¬¶
 

 
q
k
k
w
B
k
w
A
k
h
k
wt
Q
1
2
))
(
(
))
(
(
)
(
)
(
  
(9) 
A(w(k)) och B(w(k)) i ekvation (9) √§r fouriertransformen av koefficienterna A(s) 
respektive B(s) vid frekvensen w(k) och q √§r antalet frekvenspunkter, eller l√§ngden av 
frekvensfunktionen. Vidare √§r wt(k) en viktfunktion som kan anges i minimeringen f√∂r att 
l√§gga st√∂rre vikt p√• vissa frekvenser. 
 
Vid en noggrann betraktelse av r√∂rsystemet i figur 4 kan en viktig notering g√∂ras. 
Avst√•ndet l mellan h√∂gtalare 2 och mikrofonen bidrar med en tidsf√∂rdr√∂jning av ljudet som 
19
propagerar l√§ngst denna str√§cka. Denna tidsf√∂rdr√∂jning finns med i frekvensfunktionen hM. En 
√∂verf√∂ringsfunktion till ett system med en tidsf√∂rdr√∂jning √§r en irrationell funktion, och 
eftersom invfreqs anpassar rationella √∂verf√∂ringsfunktioner m√•ste tidsf√∂rdr√∂jningen tas bort 
fr√•n hM och anpassas separat.
 
Tidsf√∂rdr√∂jningen som orsakas av ljudutbredningen mellan h√∂gtalare 2 och 
mikrofonen ger en fasvridning p√•
c
fl
S
2
, d√§r f √§r frekvensen i fr√•ga, l √§r avst√•ndet mellan 
h√∂gtalare 2 och mikrofonen och c st√•r f√∂r ljudhastigheten. Genom borttagning av 
tidsf√∂rdr√∂jningen i hM bildas frekvensfunktionen hMf, vilket kan anv√§ndas av invfreqs f√∂r att 
identifiera den rationella delen av √∂verf√∂ringsfunktionen till r√∂rsystemet vid MWL. I figur 6 
illustreras Bodeplotten av frekvensfunktionen hMf och hM. I denna figur kan effekten av 
tidsf√∂rdr√∂jningen ses. Frekvensfunktionen hMf har en mindre fasf√∂rskjutning j√§mf√∂rt med hM
medan beloppet till b√•da funktionerna √§r den samma. 
 
Figur 6: Bodeplotten av frekvensfunktionen hMf och hM. Vid hMf  har tidsf√∂rdr√∂jningen tagits bort,  
 
vilket resulterar i en mindre fasvridning j√§mf√∂rt med hM  i vilket tidsf√∂rdr√∂jningen √§r modellerad.  
 
F√∂r att skapa √∂verf√∂ringsfunktionen som representerar √∂verg√•ngen av ljud mellan 
h√∂gtalare 2 och mikrofonen med hj√§lp av invfreqs m√•ste ordningen till √∂verf√∂ringsfunktionen 
vara k√§nd. D√• denna ordning inte √§r given m√•ste den best√§mmas. Med olika ordningar p√• 
t√§ljar- respektive n√§mnarkoefficienterna f√•s olika √∂verf√∂ringsfunktioner. Genom att det till 
varje √∂verf√∂ringsfunktion bildas en frekvensfunktion hfi, kan minsta kvadrafelet mellan 
frekvensfunktionen hMf och hfi anv√§ndas f√∂r att finna den troliga ordningen. Genom att 
betrakta hur felet mellan dessa frekvensfunktioner avtar ju h√∂gre ordning 
√∂verf√∂ringsfunktionen har kan den troliga ordningen best√§mmas. D√§r felet mellan hMf och hfi
b√∂rjar bli f√∂rsumbart befinner sig den troliga ordningen  Ber√§kningen av minsta kvadratfelet 
mellan hMf och hfi kan beskrivas av ekvationen
¬¶

 
 
2|
|
min
fi
Mf
h
h
e
felet
 
(10) 
d√§r summeringen sker √∂ver alla frekvenspunkter.   
20
Med hj√§lp av denna metodik kan den troliga ordningen till √∂verf√∂ringsfunktionen 
best√§mmas. Minsta kvadratfelet e indikerar att den troliga ordningen p√• t√§ljarpolynomet n √§r 
18, samtidigt som n√§mnarpolynomet m troligen har ordningen 19, se figur 7.
Figur 7: Figuren visar hur felet mellan hMf och hfi avtar. En f√∂rsumbar minskning p√• felet sker 
efter att n√§mnarpolynomet f√•tt en 19:e ordningen. Den mindre figuren √§r en f√∂rstoring kring 
det intressanta omr√•det.      
Med k√§nnedom om den troliga ordningen p√• t√§ljar- respektive n√§mnarpolynomet och 
givet en frekvensfunktion hMf identifieras √∂verf√∂ringsfunktionen G1(s).  Genom att plotta 
Bodeplotten till frekvensfunktionen hMf och √∂verf√∂ringsfunktionen G1(s), kan det grafiskt ses 
hur pass bra dessa tv√• funktioner √∂verensst√§mmer med varandra. Figur 8 visar att den skapade 
√∂verf√∂ringsfunktionen G1(s) √§r en god anpassning av hMf. D√• figuren illustrerar Bodeplotten 
till funktionerna med en logaritmisk skala syns det tydligt att anpassningen √§r tillsynes d√•lig 
vid l√•ga frekvenser. Eftersom Bodeplotten har en logaritmisk skala p√• axlarna framst√•r de 
l√•ga frekvenserna som om de utg√∂r en stor del av anpassningsfelet, vilket de inte √§r sant i 
verkligheten.
  Figur 8: Bodeplotten till frekvensfunktionen hMf och √∂verf√∂ringsfunktionen G1(s)
21
 
 
F√∂r att f√• den irrationella √∂verf√∂ringsfunktionen G(s) till r√∂rsystemet adderas  
tidsf√∂rdr√∂jningen som ej togs med vid anpassning av G1(s). Vidare i n√§sta avsnitt kommer 
√∂verf√∂ringsfunktionen G(s) att studeras och analyseras ing√•ende.
3.4 Analys av √∂verf√∂ringsfunktion 
De matematiska sambanden som r√•der mellan in- och utsignalen till ett system kan 
representeras i en √∂verf√∂ringsfunktion, och med hj√§lp av denna kan begr√§nsningar i 
bandbredden som kan √•stadkommas med √•terkopplad reglering identifieras. En viktig kontroll 
som m√•ste g√∂ras i f√∂rsta skedet √§r att kontrollera om den skapade √∂verf√∂ringsfunktionen G(s) 
√§r stabil. F√∂r att ett system ska vara stabilt kr√§vs att samtliga poler √§r bel√§gna i v√§nstra halv 
planet VHP. Med ett stabilt system menas att en begr√§nsad insignal till systemet leder till en 
begr√§nsad utsignal. Identifierad √∂verf√∂ringsfunktion G(s) visade sig vara stabil d√• alla poler 
till funktionen var strikt bel√§gna i VHP. Dock observerades att systemet hade nollst√§llen i 
h√∂gra halv planet HHP, i z = +80 rad/s och i z = 5340r i3050 rad/s.
Ett nollst√§lle i HHP ger en bandbreddsbegr√§nsning. Med en bandbredd, wB menas det 
frekvensintervall d√§r st√∂rningsundertryckning sker [6]. Bandbredden wB f√∂r ett icke- 
minimumfas system med ett reellt HHP nollst√§lle i s = z kan best√§mmas genom att betrakta 
specifikationerna i frekvensplanet till k√§nslighetsfunktionen av systemet. En 
k√§nslighetsfunktion S(s) beskriver hur st√∂rningar i ett √•terkopplat system p√•verkar utsignalen. 
D√• k√§nslighetsfunktion |S| √§r <1 d√§mpas st√∂rningar i ett system medan en f√∂rst√§rkning av 
st√∂rningar f√•s d√• |S|>1. Typiska specifikationer p√• k√§nslighetsfunktionen √§r 
bandbredden
B
w (frekvensen d√§r
|)
(
|
iw
S
sk√§r 0.707 nerifr√•n) och den maximala 
resonanstoppen till S, 
M
iw
S
d
f
||
)
(
||
[7]. Konstanten M anger den maximala f√∂rst√§rkningen 
k√§nslighetsfunktionen f√•r anta efter bandbredden wB. Mattematiskt kan dessa specifikationer 
beskrivas av en √∂vre gr√§ns-specifikation,
|)
(
|/
1
s
wp
, f√∂r k√§nslighetsfunktionen S, d√§r
p
w √§r en 
vikt enligt
s
w
M
s
s
w
B
p

 
/
)
(
  
 
 
(11) 
F√∂r att f√• bra prestanda p√• k√§nslighetsfunktionen ska
1
||
||
|,
)
(
|
|)
(
|
1

¬ú


f

S
w
w
iw
w
iw
S
p
p
  
(12) 
medan kravet p√• ett stabilt √•terkopplad system f√•s d√• den viktade k√§nslighetsfunktionen 
uppfyller
 
 
|)
(
|
||
||
z
w
S
w
p
p
t
f
 
 
 
(13) 
F√∂r att ekvation 13 ska uppfyllas samtidigt som villkoret i ekvation 12 g√§ller m√•ste 
vikten
p
w vara
22
1
|)
(
|

z
wp
 
 
 
 
(14) 
Konstanten M i ekvation 11 v√§ljs oftast till 2. Med detta v√§rde p√• M och genom att utnyttja 
ekvationerna 11 och 14 best√§ms bandbredden wB till 
    
 
 
B
w < z/2 
 
 
(15) 
Med HHP nollst√§llet z = 80 rad/s i √∂verf√∂ringsfunktionen G(s) f√•s en bandbredden p√• wB < 40 
rad/s.
 
Det har visats att ett nollst√§lle i HHP ger en bandbreddsbegr√§nsning. Ett annat 
fenomen i ett system som leder till en s√•dan begr√§nsning √§r en tidsf√∂rdr√∂jning. Ett system 
med tidsf√∂rdr√∂jning T har en √∂vre begr√§nsning p√• bandbredden enligt  
 
 
 
T
wB
/
1

    
 
(16) 
D√• √∂verf√∂ringsfunktionen G(s) har en tidsf√∂rdr√∂jning orsakad av avst√•ndet mellan h√∂gtalare 2 
och mikrofonen f√•s en bandbreddsbegr√§nsning p√• 0.23 rad/s, vilket √§r en liten begr√§nsning 
j√§mf√∂rt med begr√§nsningen HHP nollst√§llerna orsakar. Denna begr√§nsning kan minskas om 
en reducering av tidsf√∂rdr√∂jningen sker. Genom att minska p√• avst√•ndet mellan h√∂gtalare 2 
och mikrofonen f√§rdas ljud en kortare str√§cka och d√§rmed en minskad tidsf√∂rdr√∂jning och en 
minskad bandbreddsbegr√§nsning. Att placera mikrofonen n√§rmare h√∂gtalare 2 √§r ett s√§tt att 
minska p√• tidsf√∂rdr√∂jningen.  
 
Den totala bandbreddsbegr√§nsningen till r√∂rsystemet vid MWL √§r summan av 
bandbreddsbegr√§nsningen orakad av HHP nollst√§llerna och tidsf√∂rdr√∂jningen, d.v.s. 40 rad/s 
+ 0.23 rad/s = 40.23 rad/s.
Innan det g√∂rs n√•gra fysikaliska √§ndringar i systemet √§r det viktigt att klarg√∂ra n√•gra 
saker. Det √§r n√∂dv√§ndigt att f√∂rst√• inneb√∂rden av resultaten som f√•tts. Det har talats mycket 
om bandbredden i detta kapitel. Att systemet vid MWL har en bandbreddsbegr√§nsning p√• 
40.23 rad/s inneb√§r att st√∂rningsundertryckning endast sker upp till denna frekvens. Som 
n√§mnt i inledningen ligger frekvensen f√∂r h√∂rbart ljud mellan 20 och 20 kHz. Att 
st√∂rningsundertryckning endast undertrycker ljud upp till en frekvens p√• 40.23 rad/s (6.5 Hz) 
inneb√§r att effekten av regleringen inte kommer att vara h√∂rbart. 
F√∂r att unders√∂ka om ett system liknande systemet vid MWL typiskt har HHP 
nollst√§llen studeras andra arbeten. I [8] och [4] har f√∂rfattarna gjort en modell av ett system 
liknande r√∂rsystemet vid MWL. Ur modellen kunde det identifieras att systemet hade 
nollst√§llen i HHP. Dessa nollst√§llen orsakas till stor del av att ljudet reflekteras i r√∂ret [4]. 
Olika r√∂rsystem med olika dimensioner g√∂r att ljudet reflekteras p√• olika s√§tt, vilket resulterar 
i olika HHP nollst√§llen. Gemensamt f√∂r alla r√∂rsystem √§r att ljud som f√§rdas i r√∂ret reflekteras 
och resulterar i HHP nollst√§llen. Reflektionen av ljudet under f√§rden fr√•n h√∂gtalaren till 
mikrofonen i dessa system skapar en begr√§nsning ur reglersynpunkt.  
23
3.5 Fysikaliska √§ndringar i systemet 
F√∂r att minska p√• tidsf√∂rdr√∂jningen i r√∂rsystemet vid MWL kan en omplacering av 
mikrofonen ske. D√• avst√•ndet mellan h√∂gtalare 2 och mikrofonen minskas f√•r ljudet en 
kortare str√§cka att f√§rdas och d√§rmed reduceras tidsf√∂rdr√∂jningen. Avst√•ndet mellan 
h√∂gtalaren och mikrofon minskas genom att placera mikrofonen i samma tv√§rsnitt med 
h√∂gtalare 2, se figur 9. 
Figur 9: Uppst√§llningen vid MWL d√• mikrofonen placerades i samma tv√§rsnitt med       
h√∂gtalare 2.    
 Vid MWL gjordes det tv√• olika experiment p√• det modifierade systemet. Vid ett av 
dessa experiment placerades absorberingsmaterial i r√∂ret i hopp om att minska p√• 
ljudreflektionerna. Vid b√•da experimenten placerades mikrofonen i samma tv√§rsnitt som 
h√∂gtalare 2 och vitt brus upptill frekvensen 1kHz anv√§ndes som insignal till systemet. 
Figur 10: Den v√§nstra figuren visar frekvensfunktionen hM2 av det modifierade systemet med mikrofonen 
placerad i samma tv√§rsnitt som h√∂gtalare 2. H√∂gra figuren √§r en representation av frekvensfunktionen hMabs av 
systemet med absorberingsmaterial. 
Att absorberingsmaterial inte undertrycker ljud med en frekvens under 1 kHz framg√•r 
av figuren ovan. Frekvensfunktionen hMabs av systemet med absorberingsmaterial har samma 
fasvridning och f√∂rst√§rkning som frekvensfunktionen hM2, frekvensfunktionen av systemet 
utan absorberingsmaterialen. Detta styrker att det traditionella s√§ttet att undertrycka ljud med 
hj√§lp av absorberingsmaterial inte funkar f√∂r ljud med en frekvens under 1 kHz.  
24
En omplacering av mikrofonen hade en effektiv p√•verkan. D√• mikrofonen placerades i 
samma tv√§rsnitt som h√∂gtalare 2 f√•s en frekvensfunktion hM2 med en fasvridning p√• 9 rad/s 
medan frekvensfunktionen hM hade en fasvridning p√• 17 rad/s. Av detta kan det s√§gas att 
mikrofonen n√§rmare h√∂gtalaren resulterade i en betydlig mindre fasvridning eftersom 
tidsf√∂rdr√∂jningen i systemet reducerats. 
Med hj√§lp av frekvensfunktionen hM2 ska en √∂verf√∂ringsfunktion G2(s) identifieras. D√• 
mikrofonen placerades i samma tv√§rsnitt som h√∂gtalare 2 kan det bortses fr√•n att systemet har 
en tidsf√∂rdr√∂jning. Med hj√§lp av minsta kvadrat felet i ekvation 10 identifierades den troliga 
ordningen p√• √∂verf√∂ringsfunktionen till n = 15 och m = 16, se figur 11.  
 Figur 11: Figuren visar hur felet mellan hM2 och hfi avtar. En f√∂rsumbar minskning p√• felet 
sker efter att n√§mnarpolynomet f√•tt en 16:e ordningen.
Med en given frekvensfunktion hM2 och en kunskap om den troliga ordningen p√• 
t√§ljar- respektive n√§mnarpolynomet skapas √∂verf√∂ringsfunktionen G2(s).
√ñverf√∂ringsfunktionen G2(s) visade sig vara stabil men hade tv√• HHP nollst√§llen, ett i 145 
rad/s och den andra i 5640 rad/s. Av detta f√•s en bandbreddsbegr√§nsning p√• 72.5 rad/s. En 
j√§mf√∂relse mellan frekvensfunktionen hM2 och √∂verf√∂ringsfunktionen G2(s) har gjorts f√∂r att 
verifierar hur bra dessa tv√• funktioner √∂verlappar med varandra, se figur 12. En bra 
√∂verlappning av funktionerna tyder p√• att r√§tt √∂verf√∂ringsfunktion har skapats.
25
 
Figur 12: Bodeplotten till frekvensfunktionen hM2 och √∂verf√∂ringsfunktionen G2(s)
26
27
Kapitel 4
Modellbaserad regulator 
 
Det ska i detta examensarbete konstrueras en laborationsuppgift l√§mpad f√∂r studenter 
som l√§ser reglerteknik allm√§n kurs. Under kursen f√•r studenterna bekanta sig med en regulator 
kallad Lead- lag regulator. Med anledning till detta v√§ljs det att regleringen i 
laborationsuppgiften ska baseras p√• denna typ av regulator.
 
Kapitlet √§r indelat i tre avsnitt. I den f√∂rsta g√∂rs en analys av reglerbarheten och 
d√§refter skapas en regulator baserat p√• loop shaping design. I sista avsnittet till detta kapitel 
g√∂rs modifieringar i modellen i syfte att g√∂ra systemet anv√§ndbart f√∂r en laborationsuppgift 
f√∂r reglering med en Lead-lag regulator.     
4.1 Analys   
 
Det konstaterades i f√∂rra kapitlet att systemet som ska regleras har en begr√§nsning i 
form av maximal bandbredd, vilket inneb√§r att regleringen av systemet inte kommer ge n√•gra 
h√∂rbara effekter d√• st√∂rningsundertryckningen endast kommer att ske f√∂r frekvenser under 72 
rad/s. Att endast frekvenser under 72 rad/s kommer att undertryckas beror p√• att systemet har 
HHP nollst√§llen. Med nollst√§llet z = 145 rad/s ficks en bandredd p√• 72 rad/s (11.5 Hz) vilket 
inte ligger inom intervallet f√∂r h√∂rbart ljud.  
 
Till ett system som ska regleras genom √•terkoppling s√§tts krav p√• √∂nskade 
specifikationer i det slutna systemet. De tv√• fr√§msta specifikationerna √§r en l√§mplig 
sk√§rfrekvens Zc och fasmarginal Im. En sk√§rfrekvens Zc √§r det v√§rde f√∂r vilket f√∂rst√§rkningen 
av en √∂verf√∂ringsfunktion antar v√§rdet 1, |G(iZc)|=1. Vid denna frekvens definieras 
fasmarginalen Im som avst√•ndet till niv√•n 180 grader [9]. Kravet p√• Bandbredden i det givna 
systemet kan ers√§ttas med ett krav p√• sk√§rfrekvensen eftersom skillnaderna mellan dessa √§r 
sm√•. Ett s√§tt att uppfylla kraven p√• sk√§rfrekvens och fasmarginal till det slutna systemet √§r att 
anv√§nda en Lead-lag regulator med enkla l√§nkar  
bN
s
b
s
N
s
Flead


 
)
(
     
 
(17) 
M
a
s
a
s
s
Flag


 
)
(
 
 
(18) 
Denna regulator best√•r som namnet tyder p√• en s.k. lead- och lag l√§nk. Lead l√§nken (ekvation 
17) anv√§nds f√∂r att h√∂ja faskurvan vid en given sk√§rfrekvens Zc, medan lag l√§nken (ekvation 
18) anv√§nds f√∂r att uppfylla specifikationerna p√• felkoefficienterna. Parametern N (>1) i 
ekvation 17 best√§mmer den maximala fasavanceringen. F√∂r att √•stadkomma en s√•dan 
avancering vid en specifik sk√§rfrekvens v√§ljs b (>0) till 
N
w
b
√∂nskad
c )
(
 
. En h√§rledning av 
hur lag-l√§nkens parametrar a och M best√§ms ges i [9].  
28
 
Ett annat s√§tt att uppfylla kraven p√• sk√§rfrekvens och fasmarginal √§r att forma 
lutningen till kretsf√∂rst√§rkningen. Detta s√§tt kallas f√∂r loop shaping design i denna rapport. 
Med denna design formas lutning p√• beloppet till kretsf√∂rst√§rkningen s√• att kraven p√• 
systemet uppfylls. Loop shaping design √§r en allm√§nnare regleringsmetod j√§mf√∂rt med lead-
lag regleringen. I n√§sta avsnitt kommer d√§rf√∂r loop shaping designen att anv√§ndas f√∂r 
reglering av systemet i G2(s). D√§refter √•terkommer vi till regleringen med hj√§lp av en Lead-
lag regulator i senare avsnitt.
4.2 Loop shaping design  
 
Loop shaping (svenska krets formning) √§r en design procedur f√∂r formning av 
absolutv√§rdet till kretsf√∂rst√§rkningen |L(iw)| s√• att √∂nskad sk√§rfrekvens p√• ett system f√•s [7]. 
H√§r √§r L(s) = G(s)K(s) d√§r K(s) √§r regulatorn som ska konstrueras och G(s) √§r 
√∂verf√∂ringsfunktionen till systemet [7].  
 
 
F√∂r att f√• ett godtagbart √•terkopplat system m√•ste bl.a. beloppet till 
kretsf√∂rst√§rkningen |L(iw)| vara >>1 vid l√•ga frekvenser och <<1 vid h√∂ga frekvenser. Med 
l√•ga frekvenser menas frekvenser med l√§gre frekvensv√§rde √§n sk√§rfrekvensen och h√∂ga 
frekvenser √§r de frekvenser med ett h√∂gre frekvensv√§rde. Orsaken bakom kravet p√• att |L(iw)| 
ska vara st√∂rre √§n 1 vid l√•ga frekvenser √§r baserat p√• att st√∂rningar fr√§mst uppkommer vid 
l√•ga frekvenser och f√∂r att undertrycka dessa m√•ste |L(iw)| anta ett stort v√§rde. M√§tbruset i ett 
system uppkommer d√§remot vid h√∂ga frekvenser och det kr√§vs ett litet |L(iw)| f√∂r att de ska 
undertryckas.
 
Med en skarp lutning p√• |L| kan ovanst√•ende krav uppfyllas. Lutningen p√• |L| 
gentemot frekvensen best√§ms av
w
d
L
d
N
ln
/|
|
ln
 
. En lutning p√• -1 inneb√§r att |L| faller 
med en faktor p√• -20 dB d√•Z √∂kar med faktorn10. |L| kan dock inte konstrueras med en allt 
f√∂r stor lutning, d√• ett stort v√§rde p√• N orsakar att det adderas o√∂nskad fas eftersom 
2
/
)
(
)
(
arg
S
iw
N
iw
L
|
. F√∂r en l√§mplig fasmarginal vid sk√§rfrekvensen konstrueras oftast |L| 
med en lutning p√• ‚Äì1 kring sk√§rfrekvensen och en lutning p√• ‚Äì2 vid √∂vriga frekvenser. 
 
Regulatorn K(s) i L(s) m√•ste vara proper och brukar, om det √§r n√∂dv√§ndigt inneh√•lla 
en lead l√§nk f√∂r att f√∂rb√§ttra fasmarginalen p√• |L| och en lag l√§nk f√∂r att f√• en l√§mplig 
l√•gfrekvent f√∂rst√§rkning. I f√∂rra kapitlet konstaterades att r√∂rsystemet representerad i 
√∂verf√∂ringsfunktionen G2(s) hade en bandbreddsbegr√§nsning p√• 72 rad /s. Av denna 
anledning m√•ste det reglerade systemet han en sk√§rfrekvens p√• maximalt 72 rad/s.  
29
Figur 13: Bodeplotten till kretsf√∂rst√§rkningen L(s) = K(s)G2(s).  I figuren framg√•r att det 
√∂ppna systemet har en sk√§rfrekvens p√• 71.2 rad/s och en fasmarginal p√• 31.6 grader.  
                        Att L(s) har en lutning p√• ‚Äì1 vid sk√§rfrekvensen och ‚Äì2 bortom denna frekvens framg√•r ocks√•  
 
 av denna figur.  
 
Regulatorn konstruerades s√• att den eliminerar de poler i G2(s) som bidrar med att en 
st√∂rre lutning vid sk√§rfrekvensen till kretsf√∂rst√§rkningen L(s) f√•s. Polerna i G2(s) med en 
frekvens mindre √§n sk√§rfrekvensen kommer att bidra med att lutningen p√• L(s) blir mindre √§n 
‚Äì1 d√• dessa inte tas bort med hj√§lp av regulatorn. Dessa poler kommer √§ven att bidra med en 
st√∂rre negativ fasmarginal. F√∂r att eliminera dessa poler ans√§tts i regulatorn nollst√§llen vid 
samma position. Metoden som anv√§ndes f√∂r att undvika en √∂kning i lutningen orsakad av ett 
HHP nollst√§lle i s = z var att placera en pol i s = -z s√• att kretsf√∂rst√§rkningen inneh√∂ll termen 
z
s
z
s



. Denna term kallas f√∂r ett allpass filter eftersom dess belopp √§r lika med ett √∂ver alla 
frekvenser.  Regulatorn, vilket konstruerades enligt beskrivningen ovan, resulterade i en 
kretsf√∂rst√§rkning L(s) med en lutning p√• ‚Äì1 vid sk√§rfrekvensen och en acceptabel 
fasmarginal, se figur 13. 
 
Det har diskuterats i f√∂reg√•ende kapitel att ett HHP nollst√§lle orsakar en 
bandbreddsbegr√§nsning. Bandbredden ber√§knades till z/2 d√§r z √§r nollst√§llet i HHP. F√∂r att 
illustrera hur systemet p√•verkas om en st√∂rre bandbredd √§n z/2 anv√§nds vid reglering med 
hj√§lp av loop shaping betraktas k√§nslighetsfunktionen till det √•terkopplade systemet. D√• det 
reglerade systemet har en bandbredd p√• 72 rad/s f√•s en k√§nslighetsfunktion med en maximal 
f√∂rst√§rkning p√• 2.5 g√•nger, se figur 14. D√§remot f√•r k√§nslighetsfunktionen en maximal 
f√∂rst√§rkning p√• 10 g√•nger d√• det reglerade systemet har sk√§rfrekvensen 144 rad/s (samma 
frekvens som HHP nollst√§llet). Av detta kan det dras slutsatsen att ett system med en 
sk√§rfrekvens som ligger i n√§rheten av ett HHP nollst√§llen orsakar att det √•terkopplade 
systemet f√∂rst√§rker kraftigt en del frekvenser. F√∂r aktiv ljudreglering inneb√§r det att det 
√•terkopplade systemet kommer att inneh√•lla kraftiga resonanser vilket leder till att det 
st√∂rande ljudet i r√∂rsystemet kommer att f√∂rst√§rkas kraftigt.  
30
 
 
Figur 14: Tre olika k√§nslighetsfunktioner f√∂r ett system som reglerades med tre olika  
 
 
sk√§rfrekvenser. D√• det √∂ppna systemet har en sk√§rfrekvens n√§ra HHPs nollst√§llet f√•s  
 
 
en k√§nslighetsfunktion S3 med en kraftig resonanstopp.     
4.3 Modifiering av reglerbarhet 
 
Syftet med examensarbetet √§r att skapa en datorlaboration som ska anv√§ndas av 
teknologer som l√§ser reglerteknik allm√§n kurs. Av pedagogiska sk√§l vill man att effekten av 
regleringen ska h√∂ras med hj√§lp av en h√∂gtalare kopplade till datorn teknologen anv√§nder. D√• 
det konstaterades att regleringen av G2(s) inte ger n√•gon h√∂rbar effekt p.g.a. 
bandbreddsbegr√§nsningen best√§mdes det att en modifiering skulle g√∂ras i modellen av 
systemet.  
 
F√∂r att f√• ett h√∂rbart resultat vid reglering m√•ste begr√§nsningen reduceras, HHP 
nollst√§llet m√•ste flyttas l√§ngre ut i halvplanet f√∂r att f√• en minskad bandreddsbegr√§nsning. 
Kravet, d√• positionen p√• nollst√§llerna √§ndras √§r att absolutkurvan till systemet f√∂reblir den 
samma. 
 
F√∂r att minska den stora begr√§nsningen systemet G2(s) har, speglades de tv√• HHP 
nollst√§llerna i G2(s) in i VHP samtidigt som ett HHP nollst√§lle med ett relativt stort positivt 
v√§rde ansattes. D√• filtrering av ljud visades inte ge n√•gra h√∂rbara effekter d√• ljud under 600 
Hz (3800 rad/s) filtreras valdes att √∂verf√∂ringsfunktionen skulle ha en bandbredd bortom 
denna frekvens. Med ett HHP nollst√§lle i 8500 rad/s f√•r systemet en maximal bandbredd p√• 
4250 rad/s (680 Hz). Med denna bandbredd √§r det m√∂jligt att h√∂ra effekten av regleringen 
med hj√§lp av vanliga datorh√∂gtalare. Den modifierade √∂verf√∂ringsfunktionen G2mod(s) har 
samma amplitudskurva som G2(s) medan en skillnad i fasen kan uppm√§rksammas, se figur 15. 
Skillnaden orsakas av att ett HHP nollst√§lle s√§nker faskurvan. 
31
 
Figur 15: Bodeplotten av √∂verf√∂ringsfunktionen G2(s) och den modifierade funktionen G2mod(s)
 
med ett HHP nollst√§lle i 8500 rad/s.   
 
Innan reglerdesignen startar m√•ste ytterligare en modifiering g√∂ras. F√∂r att 
√∂verf√∂ringsfunktionen ska vara anv√§ndarv√§nlig, ur en pedagogisk synvinkel, f√∂r studenter 
som l√§ser kursen reglerteknik allm√§n kurs m√•ste resonanserna i √∂verf√∂ringsfunktionen 
minskas. Resonanser i ett system orsakas av komplexkonjugerade poler och nollst√§llen. Med 
kunskap om vilka poler och nollst√§llen som ger upphov till de o√∂nskade resonanstopparna kan 
dessa toppar elimineras. D√• resonanstopparna elimineras minskas √§ven oscillationen i fasen, 
en j√§mnare faskurva f√•s. Resultatet av elimineringen av de kraftiga resonanserna blev 
√∂verf√∂ringsfunktionen G2modf(s). En j√§mf√∂relse mellan G2mod(s) och G2modf(s) visas i figur 16. 
I denna figur kan resultatet av elimineringen tydligt urskiljas, inga kraftiga resonanser finns 
medan en stor del av dynamiken i systemet kvarst√•r.   
Figur 16: Bodeplotten av √∂verf√∂ringsfunktionen G2mod(s) tillsammans med funktionen  
G2modf(s) i vilket de kraftiga resonanserna har eliminerats 
-80
-60
-40
-20
0
20
Magnitude (dB)
10
0
10
1
10
2
10
3
10
4
10
5
10
6
-360
-180
0
180
360
540
Phase (deg)
Bode Diagram
Frequency  (rad/sec)
G2(s)
G2mod(s)
G2mod(s)
G2(s)
-80
-60
-40
-20
0
20
Magnitude (dB)
10
0
10
1
10
2
10
3
10
4
10
5
10
6
0
90
180
270
360
450
540
Phase (deg)
Bode Diagram
Frequency  (rad/sec)
G2modf(s)
G2mod(s)
32
En modifiering av G2(s) har gjorts vilket lett till en minskad bandbreddsbegr√§nsning 
och en minskning i antalet resonanser. Med dessa modifieringar kan regulator konstruktionen 
starta. En Lead-lag regulator skapas med m√•let att en d√§mpning i ljudniv√•n i r√∂rsystemet ska 
var h√∂rbart. Med detta m√•l v√§ljs att det reglerade systemet ska ha en sk√§rfrekvens p√• 4000 
rad/s (strax under bandbreddsbegr√§nsningen) och en fasmarginal p√• 60 grader. 
√ñverf√∂ringsfunktionen G2modf(s) har vid den √∂nskade sk√§rfrekvensen en fas p√• 172 grader 
enligt figur 17. F√∂r att en fasmarginal p√• 60 grader ska f√•s m√•ste en fasavancering p√• 68 
grader ske. Effektivast uppn√•s denna fasavancering, vid den √∂nskade sk√§rfrekvensen med 
hj√§lp av tv√• seriekopplade lead-l√§nkar, d√§r varje l√§nk ska bidra med en faslyft p√• ca 35 grader.      
 
Figur 17: √ñverf√∂ringsfunktionen G2modf(s) d√§r fasen vid den √∂nskade sk√§rfrekvensen har
markerats. 
 
Lead-lag regulatorn lyckades skapa ett stabilt √•terkopplat system med en fasmarginal 
p√• 60 grader och en sk√§rfrekvens p√• 4000 rad/s, se figur 18. Ljud med en frekvens under 
sk√§rfrekvensen kommer att d√§mpas av det √•terkopplade systemet medan ljudsignaler med en 
h√∂gre frekvens kommer att f√∂rst√§rkas. En Bodeplott d√§r det illustrativt g√•r att se vilka 
frekvenser som d√§mpas och vilka ger upphov till en f√∂rst√§rkning av st√∂rningar i r√∂rsystemet 
kan √•sk√•das i Bodeplotten till k√§nslighetsfunktionen av det reglerade systemet i figur 19. I 
denna figur kan det ses att en kraftig st√∂rningsundertryckning sker f√∂r frekvenser under 10 
rad/s medan undertryckningen d√§refter ligga runt ‚Äì10 dB √§nda fram till sk√§rfrekvensen. 
Slutsatsen √§r att det med hj√§lp av en Lead-lag regulator inte g√•r att f√• en stor 
st√∂rningsundertryckning vid h√∂ga frekvenser.
33
Figur 18: Bodeplotten av det √∂ppna systemet F(s)G2modf(s), d√§r F(s) √§r Lead-lag regulatorn som 
best√•r av tv√• lead- och en lag-l√§nk.
 
Figur 19: K√§nslighetsfunktionen till det reglerade systemet G2modf(s)
34
35
Kapitel 5
F√∂rslag till laborationsuppgift
1.
Studenten ska f√∂rst ladda ner 
√∂verf√∂ringsfunktionen G2(s) fr√•n 
kurshemsidan och plotta dess 
bodeplott.
 
Denna laborationsuppgift har flera m√•l. Det huvudsakliga m√•let √§r att studenterna 
som g√∂r laborationen ska konstruera en Lead- lag regulator som d√§mpar ljudniv√•n i 
r√∂rsystemet vid MWL. Effekten av regleringen ska vara h√∂rbar och kunna verifieras med 
vanliga datorh√∂gtalare. Under laborationen ska man ge studenterna en inblick i systemet. 
Studenterna ska sj√§lva verifiera att systemet √§r av icke minimumfas karakt√§r och d√§refter 
ska det f√∂rklaras f√∂r dem att systemet m√•ste modifieras f√∂r att kunna regleras med en 
enkel Lead-lag regulator. Sj√§lva modifieringen ska g√∂ras av studenterna. Med modifiering 
menas att bandbreddsbegr√§nsningen minskas genom att HHP nollst√§llerna speglas in till 
VHP och d√§refter ans√§tts ett HHP nollst√§lle som inte utg√∂r n√•gra st√∂rre begr√§nsningar ur 
reglersynpunkt. I verkligheten inneb√§r modifieringen att det placeras d√§mpande material i 
r√∂rsystemet s√• att ljudreflektionerna minskas. Experiment har visat att det kr√§vs en 
bandbredd p√• minst 3800 rad/s f√∂r att effekten av regleringen ska vara h√∂rbart med 
datorh√∂gtalare. Till denna anledning ska det ans√§ttas ett nollst√§lle i HHP med ett v√§rde p√• 
8500 rad/s.
 
√ñverf√∂ringsfunktionen G2(s) som ska anv√§nds i laborationen √§r 
√∂verf√∂ringsfunktionen till r√∂rsystemet vid MWL men med en eliminering av vissa 
resonanser. Nedan h√§rleds l√§saren stegvis genom den f√∂rslagna laborationsuppgiften. 
36
2.
N√§r studenten lyckats plotta 
bodeplotten till √∂verf√∂ringsfunktionen
ska han/hon d√§refter identifiera om 
systemet √§r ett minfas- eller icke 
minimumfassystem.  
Studenten ska identifiera att G2(s) har 
2st HHP nollst√§llen och d√§rmed ett 
icke minimumfassystem. 
3.
N√§sta uppgift i laborationen √§r 
att spegla in HHP nollst√§llerna 
till VHP utan att beloppskurvan 
till G2(s) √§ndras. Studenten ska 
till det nya systemet G3(s)
ans√§tta ett HHP nollst√§lle i 8500 
rad/s.
Tips till studenten: anv√§nd 
Matlab funktionen ]SN (se help 
]SNf√∂r att √§ndra i ett systems 
poler och  nollst√§llen.
Efter att studenten verifierat att systemet G2(s) √§r av icke minimumfas karakt√§r f√∂rklaras 
att detta systemet inte kan regleras med en Lead-lag regulator d√• HHPs nollst√§llen utg√∂r 
en begr√§nsning. F√∂r att g√∂ra systemet reglerbart m√•ste begr√§nsningen elimineras vilket 
inneb√§r att nollst√§llen m√•ste speglas in VHP. D√• systemet i verkligheten har HHP 
nollst√§llen m√•ste det d√§rf√∂r ans√§ttas ett nollst√§lle i HHP p√• ett s√•dant s√§tt att begr√§nsning 
inte f√•s. Ett nollst√§lle i 8500 rad/s √§r ett nollst√§lle som visats vara anv√§ndbart. Vidare 
f√∂rklaras det f√∂r den som g√∂r datorlaborationen att ett HHP nollst√§lle i 8500 rad/s inneb√§r 
att systemet maximal f√• ha en sk√§rfrekvens p√• 4250 rad/s och att experiment har visat att 
man beh√∂ver reglera upp till 3800 rad/s f√∂r att effekten av regleringen ska vara h√∂rbart 
med en pc h√∂gtalare.  
37
4.
Studenten ska genom att plotta 
bodeplotten till G2(s) och G3(s)
grafiskt se hur HHP nollst√§llen 
p√•verkar faskurvan.
5.
Uppgiften nu √§r att konstruera en 
Lead-lag regulatorn f√∂r att f√• en fas 
p√• 60 grader vid sk√§rfrekvensen 
4000 rad/s. 
Vid den √∂nskade sk√§rfrekvensen
4000 rad/s har systemet G3(s) en fas 
p√• 172 grader. F√∂r att f√• en 
fasmarginal p√• 60 grader ska 
studenten komma underfund med  
att den √∂nskade faslyften √§r 68 
grader.
Tips f√∂r studenten: tv√• lead l√§nkar 
kan anv√§ndas f√∂r att f√• √∂nskad 
faslyft. 
38
6.
Resultatet av regleringen framg√•r 
av figuren intill. Vid den √∂nskade 
sk√§rfrekvensen har systemet en 
fasmarginal p√• 60 grader.  
7.
F√∂r att h√∂ra resultatet av regleringen ska studenten f√∂rst simulera systemet G3(s) med 
vitt brus
)
(t
Z
, vilket kan laddas ner fr√•n kurshemsidan. D√§refter simulerar han/hon det 
√•terkopplade systemet med samma vita brus. En d√§mpning i ljudniv√•n ska h√∂ras om 
regulatorn har konstruerats r√§tt. 
Tips f√∂r studenten: F√∂r simulering av att ett system kan OVLP anv√§ndas och f√∂r att spela 
upp ljud kan ZDYSOD\ vara anv√§ndbart. 
39
Kapitel 6
Slutsatser
 
Det har visats i detta examensarbete att en matematisk modell √∂ver r√∂rsystemet vid 
MWL kan skapas med hj√§lp av ett identifieringsexperiment.  Med en l√§mplig insignal till 
systemet kunde in- respektive utsignalernas spektra anv√§nds f√∂r att skapa frekvensfunktionen 
√∂ver systemet. Med hj√§lp av denna frekvensfunktion kunde systemets dynamik identifieras.  
 
Att anpassa en √∂verf√∂ringsfunktion givet en frekvensfunktion med hj√§lp av Matlab 
funktionen invfreqs ger ett bra resultat. Det g√§ller f√∂r den som ska anv√§nda funktionen till 
anpassning att f√∂rst√• vad funktionen ger f√∂r resultat och vad man har tillg√§ngligt. T.ex. √§r det 
viktigt att modellera tidsf√∂rdr√∂jningen i en frekvensfunktion separat d√• invfreqs endast kan 
anpassa rationella √∂verf√∂ringsfunktioner. Det √§r √§ven n√∂dv√§ndigt att anv√§nda r√§tt metod f√∂r 
best√§mning av den troliga ordningen p√• √∂verf√∂ringsfunktionen som ska identifieras.  
 
En viktig slutsats som m√•ste lyftas fram √§r att r√∂rsystem liknande MWL:s har HHP 
nollst√§llen. Dessa nollst√§llen orsakas av att ljudet i r√∂ret reflekteras. √Ñnnu har man inte 
kommit p√• ett s√§tt att undvika ljudreflektionen s√• att bandbreddsbegr√§nsningen minskas. 
D√§remot har det visats i detta examensarbete att en reducering av tidsf√∂rdr√∂jningen minskar 
p√• begr√§nsningen i den bandbredd som kan √•stadkommas genom √•terkoppling.     
 
Det √§r viktigt att p√•peka att examensarbetet startades med avsikten att skapa en 
datorlaboration till en regler allm√§n kurs. Men under arbetets g√•ng visades att systemet har en 
h√∂g modellordning och en sv√•r begr√§nsning. Hade inte examensarbetet avsikten att skapa en 
datorlaboration till en s√•dan kurs kunde mer avancerade regulatorer med h√∂gre ordningar 
anv√§ndas f√∂r att reglera systemet. Exempel p√• avancerade regulatorer som kunde anv√§ndas f√∂r 
att reglera ljudniv√•n i r√∂rsystemet vid MWL √§r
f
H reglering vilket √§r en avancerad from av 
loop shaping.
40
41
Kapitel 7
Referenser
[1] H. Bod√©n (2006) Applications of Signal Analysis , Active control of Sound
[2] W. Tseng , B.Rafaely, and S.J. Elliott (1998) Combined feedback-feedforward active
     control of sound in a room
[3] S. J. Elliott,T. J. Sutton, (1996) IEEE transactions on speech  and audio processing,
     Performance of feedforward and feedback system for active control, vol 4, no 3 
[4] H. Jeongho, J.C. Akers, R. Venugopal, M. Lee, A.G. Sparks, P.D. Washabaugh, and  
    D.S. Bernstein. (1996) IEEE Transaction on control system technology, Modeling,
   Identification, and Feedback Control of Noise in an Acoustic Duct, vol. 4, nr. 3 
[5] L. Ljung, T. Glad (2004) modellbygge och simulering, ISBN 91-44-02443-6 
[6] L. Ljung, T. Glad (2003) Reglerteori Flervariabla och olinj√§ra metoder, ISBN 91-44-
      03003-7 
[7] S. Skogestad , I. Postlethwaite. (1996) Multivariable feedback control, Analysis
     and design, ISBN 0-471-94-277-4. 
[8] J. C. Carmon and V. M. Alvarado (2000) IEEE Transaction on control system technology,       
   Active Noise Control of a Duct Using Robust Control Theory, vol. 8, nr 6 
[9] L. Ljung, T. Glad (1989) Reglerteknik Grundl√§ggande teori, ISBN 91-44-17892-1 
[10] J.N.Jauang (1994) Applied system identification, ISBN:0-13-079211-X
[11] P. Rybin (2003) Active Noise Control in Home Environment, (Master¬¥s Thesis) 
[12] Matlab version 7.0 
42
